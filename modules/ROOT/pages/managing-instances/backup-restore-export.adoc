[[aura-backup-restore-export]]
= Backup, export, restore, and upload
:description: This page describes how to backup, export, and restore your data from a snapshot as well as using `neo4j admin` to upload data.
:page-aliases: auradb/managing-databases/backup-restore-export.adoc, aurads/managing-databases/backup-restore-export.adoc, aurads/managing-databases/importing-data/import-db, auradb/importing/import-database

The data in your Aura instance can be backed up, exported, and restored using snapshots.

A snapshot is a copy of the data in an instance at a specific point in time.

The *Snapshots* tab within an Aura instance card shows a list of available snapshots.
You can find the *Snapshots* tab via *Inspect* in the more menu (*...*) on the instance card.

There are different kinds of snapshots taken at different intervals with different lifecycles depending on your tier.
See <<snapshot-details>> for more information.


Aura stores the data securely in encrypted cloud storage buckets.
Backups are stored in the same Cloud Service Provider and region as the instance they are associated with.

== Snapshot types

=== Scheduled

label:AuraDB-Professional[]
label:AuraDB-Business-Critical[]
label:AuraDB-Virtual-Dedicated-Cloud[]
label:AuraDS-Professional[]
label:AuraDS-Enterprise[]

A *Scheduled* snapshot is a snapshot that is automatically triggered at a cadence depending on your tier.

For Professional instances running the latest version, scheduled snapshots are run automatically once a day, same for both AuraDS Professional and for AuraDS Enterprise instances, For Business Critical and Virtual Dedicated Cloud instances, they run once an hour.
See <<snapshot-details>> further on for information about frequency, restorability, and exportability of scheduled snapshots, as well snapshots on instances running version 4.x.

=== On Demand

An *On Demand* snapshot is a snapshot that you manually trigger with the *Take snapshot* button.
This type of snapshot is the only snapshot available for Free instances.

== Snapshot actions

image::snapshot-actions.png[width=400]

[[export-create]]

=== Export / Create

From the more menu (...) next to an existing snapshot, you can:

* *Export* - Download an AuraDB instance as a .backup file (latest version) or .dump file (version 4.x) to store a local copy and work on data offline.
AuraDB instances with the Graph Analytics plugin are also exported as a .backup file.
Download an AuraDS instance as a .tar file.

* *Create instance from snapshot* - Create a new instance using the data from the snapshot.


[NOTE]
====
The ability to Export or Create an instance from a scheduled Virtual Dedicated Cloud snapshot is limited to 14 days for 4.x instances.
For latest version instances, this is limited to 60 days for full scheduled backups.
Differential backups are not restorable/exportable and cannot be used to create a new instances from.

Additionally, for Virtual Dedicated Cloud instances running Neo4j latest version, the ability to export or create an instance from a scheduled snapshot is limited to one (full) snapshot per day.

Use the toggle **Show exportable only** on top of the list of snapshots to filter by whether a snapshot is exportable or not.
====

[[restore-snapshot]]
=== Restore

[CAUTION]
====
Restoring from a snapshot overwrites the data in your instance, replacing it with the data contained in the snapshot.
====

You can restore data in your instance to a previous snapshot.
Use the arrow next to the (*...*) menu on the snapshot you want to restore from.
This action overwrites the data currently in your instance and you will be asked to confirm that this is indeed desired.
If not, you can create a new instance from the snapshot instead, as described in <<export-create>>.


[[snapshot-details]]
== Snapshot details

[cols="^,^,^,^,^,^,^",options="header"]
|===
| Tier
| Aura version
2+| Frequency of snapshots
2+| Scheduled snapshots
| On-demand snapshot footnote:1[On-demand snapshots are restorable and exportable for the same period.]

|
|
| *Full snapshot* footnote:2[The full snapshot captures the entire database, while differential snapshots record changes since the last full snapshot.]
| *Differential snapshot*
| *Restorable days*
| *Exportable days*
| *Restorable and exportable days*

| AuraDB Free
| 4, latest
| N/A
| N/A
| N/A
| N/A
| N/A

| AuraDB Professional
| 4, latest
| Daily
| N/A
| 7
| 7
| 7

| AuraDB Business Critical
| latest
| Daily
| Hourly
| 30
| 30 full footnote:3[The differential snapshot is not exportable.]
| 30

.2+| AuraDB Virtual Dedicated Cloud
| 4
| Every 6 hours footnote:4[One snapshot per day has a long retention period and remaining three a shorter period.]
|
| 60 (long), 7 (short)
| 14 (long), 7 (short)
| 90

| latest
| Daily
| Hourly
| 60
| 60 full footnote:3[]
| 90

| AuraDS Professional
| latest
| Daily
| N/A
| 7
| 7
| 30

| AuraDS Enterprise
| latest
| Daily
| N/A
| 14
| 7
| 90
|===

[[restore-backup]]
== Restore from backup file

From the *Restore from backup file* tab, next to the *Snapshots* tab on the instance card, drag and drop your _.backup_, _.dump_, or _.tar_ file or browse for it.
This action also overwrites the data currently in your instance.
If this is not desired, you can create a new instance from the snapshot instead, as described in <<export-create>>.

[[neo4j-admin-upload]]
== Upload an existing Neo4j database

If you have a local copy of a Neo4j database and Neo4j installed locally, you can use this installation of Neo4j to upload this to your Aura instance.

[CAUTION]
====
This command does not work if you have a network access configuration setup that prevents public traffic to the region your instance is hosted in. See <<Public traffic>> below for more information.
====

`database upload` is a `neo4j-admin` command that you can run to upload the contents of a Neo4j database into an Aura instance, regardless of the database's size, as long as it fits your Aura instance.
Keep in mind that the database you want to upload may run a different version of Neo4j than your Aura instance.
Additionally, your Neo4j Aura instance must be accessible from the machine running `neo4j-admin`.
Otherwise, the upload will fail with SSL errors.

For details on how to use the `neo4j-admin database upload` command, along with a full list of options and version compatibility, see link:{neo4j-docs-base-uri}/operations-manual/current/tools/neo4j-admin/upload-to-aura/[Operations Manual â†’ Upload to Neo4j Aura].

[NOTE]
====
The `database upload` command, introduced in Neo4j 5, replaces the `push-to-cloud` command in Neo4j 4.4 and 4.3.
If the database you want to upload is running an earlier version of Neo4j, please see link:https://neo4j.com/docs/operations-manual/4.4/tools/neo4j-admin/push-to-cloud/[the Neo4j Admin push-to-cloud documentation].
====

[CAUTION]
====
The `neo4j-admin push-to-cloud` command in Neo4j 4.4 and earlier is not compatible with instances encrypted with Customer Managed Keys.
Use `neo4j-admin database upload` in Neo4j 5 to upload data to instances encrypted with Customer Managed Keys.

For Neo4j 4.x instances in Azure encrypted with Customer Managed Keys, use the Import data service to load data, as `neo4j-admin database upload` is not supported.
See xref:import/introduction.adoc[Import] for more information.
====

=== Public traffic

If you have created a network access configuration from the *Network Access* page, accessed through the sidebar menu of the Console, *Public traffic* must be enabled for the region your instance is hosted in before you can use the `database upload` command on that instance.

To enable *Public traffic* on a network access configuration:

. Select *Configure* next to the region that has Public traffic disabled.

. Select *Next* until you reach step 4 of 4 in the resulting *Edit network access configuration* modal.

. Clear the *Disable public traffic* checkbox and *Save*.

You can now use the `database upload` command on the instances within that region.
Once the command has completed, you can disable *Public traffic* again by following the same steps and re-selecting the *Disable public* traffic checkbox.