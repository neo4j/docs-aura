[aura-customer-metrics-scrape-config]
= Metrics endpoint Scrape configuration
:table-caption!:

label:AuraDB-Virtual-Dedicated-Cloud[]
label:AuraDS-Enterprise[]
label:AuraDB-Business-Critical[]

Aura Metrics Integration setup offers two types of metrics endpoints to scrape Aura instance metrics:

- **Project metrics endpoint** - A single endpoint with Project level scrape configuration that allows selecting which instance metrics to include.
- **Instance metrics endpoint** - Individual endpoint for each of the instances in the Project with corresponding scrape configuration.

image:cmi_initial_status.png[]

Click on the `Cog` icon for an endpoint in the table to configure that endpoint.

[NOTE]
====
**_Selecting endpoints_**

Selecting an endpoint is based on individual use cases. 

In general, if there is a need to monitor the performance of a specific Aura instance in your project it's better to use the instance endpoint. 

If your goal is to monitor a subset of instances in the Project and you don't want to configure an APM system for each endpoint, then configure the Project endpoint and select the instances you are interested in.
====

[cmi-scrape-config]
== Configure endpoints

Aura Metrics integration scrape configuration allows user to customize metrics endpoints. 
The following customizations are currently supported:

* Project endpoint settings:
+
image:cmi_project_config.png[]
+
. `Selecting instances to include in project endpoint` - This is a project endpoint specific setting which allows users to select instances to scrape metrics for.
. `Include new instances` - This setting enables scraping for newly created instance without manually updating the Project scrape configuration.
. `Metrics granularity` - This setting allows scraping more granular metrics (`Comprehensive`) for each of the instances enabled. 
It is an on-demand setting only available for Virtual Dedicated Cloud projects and needs to be requested through link:https://support.neo4j.com/[Customer Support].

* Instance endpoint settings :
+
image:cmi_instance_config.png[]
+
. `Metrics granularity` - This setting allows scraping more granular metrics(`Comprehensive`) for each of the instances enabled. 
It is an on-demand setting only available for Virtual Dedicated Cloud project instances and it needs to be requested through link:https://support.neo4j.com/[Customer Support].
+
image:cmi_enable_comprehensive.png[]

[IMPORTANT]
====
Scrape configuration changes affect the metrics endpoints only after **__5 minutes__** of submittng these changes from UI due to Metrics integration service caching.
====