= GCP using Private Service Connect

Refer to https://cloud.google.com/vpc/docs/private-service-connect[GCP Private Service Connect] docs for required permissions.

image::privateserviceconnect.png["VPC connectivity with GCP Private Service Connect", title="VPC connectivity with GCP Private Service Connect"]

Without private endpoints, you access Query and Explore over the internet:

image::privateserviceconnect_01_before_enabling.png["Architecture overview before enabling private endpoints", title="Architecture overview before enabling private endpoints"]

When you have enabled private endpoints and disabled public internet access, you can no longer connect Query or Explore to your instances over the internet:

image::privateserviceconnect_02_enabled_private_traffic_only.png["Architecture overview with private endpoints enabled and public traffic disabled", title="Architecture overview with private endpoints enabled and public traffic disabled"]

[NOTE]
====
To access Query and Explore over a VPN, you must ensure that:

* You have set up link:https://cloud.google.com/dns/docs/zones/manage-response-policies[GCP Response Policy Zone], or an equivalent DNS service, inside of the VPC.
* You use the *Private URI* shown on the instance tile and in the instance details.
It will be different from the *Connection URI* you used before.
====

image::privateserviceconnect_03_browser_bloom_over_vpn.png["Accessing Query and Explore over a VPN", title="Accessing Query and Explore over a VPN"]